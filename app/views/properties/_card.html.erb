<div class="feed-card">
  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false">
    <div class="carousel-inner" style="width: 100%; height: auto; margin-bottom: 2px;">
      <div class="carousel-item active">
        <img class="d-block w-100 feed-img" src="<%= cl_image_path property.photos.first.key, height: 570, width: 350, crop: :fill %>" alt="First slide" style="position:relative; opacity: 80%;">
          <div class="icon-overlay">
            <div class="button-pill">
              <i class="fas fa-compass"></i>
              <div class="button-pill-info">
                <p><%= property.location %></p>
              </div>
            </div>

            <div class="button-pill">
              <i class="fas fa-train"></i>
              <div class="button-pill-info">
                <p><%= property.distance_to_station %> minute walk</p>
              </div>
            </div>

            <div class="button-pill">
              <i class="fas fa-tag"></i>
              <div class="button-pill-info">
                <p>¥<%="#{property.price.to_s[0..-4]},#{property.price.to_s[-3..-1]}"%></p>
              </div>
            </div>
          </div>
      </div>
      <div class="carousel-item">
        <img class="d-block w-100 feed-img" src="<%= cl_image_path property.photos.last.key, height: 570, width: 350, crop: :fill %>" alt="Second slide" style="position:relative; opacity: 80%;">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100 inactive" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/pin-l-home+BA00D9(<%=property.longitude%>,<%=property.latitude%>)/<%=property.longitude%>,<%=property.latitude%>,14,0,0/600x1000?access_token=pk.eyJ1Ijoic2hvdWtvMDUyMiIsImEiOiJjazM4bDU2NW4wMzl3M2lxZTE5cml5a2tlIn0.s7I7YWPUw2sOQdWENcgDtA" alt="Second slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <div class="feed-additional-info">
    <% if feed %>
      <div class="like-dislike-btns" style="top: -2.5%;">
        <div>
          <%= simple_form_for property_viewing do |f| %>
            <%= f.input :property_id, :as => :hidden, :input_html => { :value => property.id } %>
            <%= f.input :status, :as => :hidden, :input_html => { :value => "disliked" } %>
            <%= f.button :submit, "", class: "feed-no-btn"%>
          <% end %>
        </div>
        <div>
          <%= simple_form_for property_viewing do |f| %>
            <%= f.input :property_id, :as => :hidden, :input_html => { :value => property.id } %>
            <%= f.input :status, :as => :hidden, :input_html => { :value => "liked" } %>
            <%= f.button :submit, "", class: "feed-yes-btn"%>
          <% end %>
        </div>
      </div>
    <% end %>
    <div class="white-box-feed">
      <%= render "property_viewings/criteria", property: property, user: user %>
    </div>
    <div class="additional-info-box">
      <h2 class="header">Additional Information</h2>
      <div class="additional-info-line" style="display: flex; margin-bottom: 1rem;">

        <div class="button-pill">
          <i class="fas fa-compass"></i>
          <div class="button-pill-info">
            <p><%= property.location %></p>
          </div>
        </div>

        <div class="button-pill">
          <i class="fas fa-tag"></i>
          <div class="button-pill-info">
            <p>¥<%="#{property.price.to_s[0..-4]},#{property.price.to_s[-3..-1]}"%></p>
          </div>
        </div>

      </div>

      <div class="additional-info-line">


        <div class="button-pill">
          <i class="fas fa-key"></i>
          <div class="button-pill-info">
            <p style="font-size: 12px; font-weight: bold;">Key money</p>
              <% if property.key_money %>
                <p>¥<%="#{property.key_money.to_s[0..-4]},#{property.key_money.to_s[-3..-1]}"%></p>
              <% else %>
              <% end %>
          </div>
        </div>

        <div class="button-pill">
          <i class="fas fa-money-check"></i>
          <div class="button-pill-info">
            <p style="font-size: 12px; font-weight: bold;">Deposit</p>
            <p>¥<%= "#{property.deposit.to_s[0..-4]},#{property.deposit.to_s[-3..-1]}" %></p>
          </div>
        </div>

      </div>

      <div class="additional-info-line">

        <div class="button-pill">
          <i class="fas fa-arrows-alt"></i>
          <div class="button-pill-info">
            <p><%= property.layout %></p>
          </div>
        </div>

        <div class="button-pill">
          <i class="fas fa-ruler-combined"></i>
          <div class="button-pill-info">
            <p><%= property.size %>m²</p>
          </div>
        </div>

      </div>

      <div class="additional-info-line">

        <div class="button-pill">
          <i class="fas fa-arrow-up"></i>
          <div class="button-pill-info">
            <p><%= property.floor %>F</p>
          </div>
        </div>

        <div class="button-pill">
          <i class="fas fa-heartbeat"></i>
          <div class="button-pill-info">
            <p><%= property.age %> years old</p>
          </div>
        </div>

      </div>

      <div class="initial-cost">
        <h2>Initial cost</h2>
        <p>Including first month’s rent, deposit, key money</p>
      </div>
      <div class="initial-cost-price">
        <p>¥<%= "#{property.initial_cost.to_s[0..-4]},#{property.initial_cost.to_s[-3..-1]}" %></p>
      </div>

    </div>
  </div>
</div>
